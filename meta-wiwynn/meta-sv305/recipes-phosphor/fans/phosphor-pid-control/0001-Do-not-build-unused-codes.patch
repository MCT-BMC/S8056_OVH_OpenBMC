From 648b66edeeb43247942fc97b90f5e60bc91bf328 Mon Sep 17 00:00:00 2001
From: Wayne Tung <Wayne_Tung@wiwynn.com>
Date: Fri, 7 May 2021 14:40:04 +0800
Subject: [PATCH 1/7] Do not build unused codes

---
 Makefile.am | 37 ++-----------------------------------
 1 file changed, 2 insertions(+), 35 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index 7465a72..7091291 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -42,19 +42,7 @@ if HAVE_SYSTEMD
 systemdsystemunit_DATA = phosphor-pid-control.service
 endif
 
-bin_PROGRAMS = swampd setsensor
-
-setsensor_SOURCES = setsensor.cpp
-setsensor_LDADD = \
-	$(SDBUSPLUS_LIBS) \
-	$(PHOSPHOR_DBUS_INTERFACES_LIBS) \
-	$(PHOSPHOR_LOGGING_LIBS) \
-	$(CODE_COVERAGE_LIBS)
-setsensor_CXXFLAGS = \
-	$(SDBUSPLUS_CFLAGS) \
-	$(PHOSPHOR_DBUS_INTERFACES_CFLAGS) \
-	$(PHOSPHOR_LOGGING_CFLAGS) \
-	$(CODE_COVERAGE_CXXFLAGS)
+bin_PROGRAMS = swampd
 
 swampd_SOURCES = main.cpp
 swampd_LDADD = \
@@ -110,27 +98,6 @@ libswampd_la_SOURCES = \
 	pid/util.cpp \
 	pid/pidloop.cpp \
 	pid/tuning.cpp \
-	build/buildjson.cpp \
-	experiments/drive.cpp
-
-libmanualcmdsdir = ${libdir}/ipmid-providers
-libmanualcmds_LTLIBRARIES = libmanualcmds.la
-libmanualcmds_la_SOURCES = \
-	ipmi/main_ipmi.cpp \
-	ipmi/manualcmds.cpp \
-	ipmi/dbus_mode.cpp
-libmanualcmds_la_LDFLAGS = \
-	$(SYSTEMD_LIBS) \
-	$(PHOSPHOR_DBUS_INTERFACES_LIBS) \
-	$(PHOSPHOR_LOGGING_LIBS) \
-	$(LIBIPMID_LIBS) \
-	$(CODE_COVERAGE_LIBS) \
-	-version-info 0:0:0 -shared
-libmanualcmds_la_CXXFLAGS = \
-	$(SYSTEMD_CFLAGS) \
-	$(PHOSPHOR_DBUS_INTERFACES_CFLAGS) \
-	$(PHOSPHOR_LOGGING_CFLAGS) \
-	$(LIBIPMID_CFLAGS) \
-	$(CODE_COVERAGE_CXXFLAGS)
+	build/buildjson.cpp
 
 SUBDIRS = . test
-- 
2.28.0

