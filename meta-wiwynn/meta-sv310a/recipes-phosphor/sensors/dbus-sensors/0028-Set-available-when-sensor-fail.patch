From 9b467000d42fc2caf3ba97a810b78904ff2992d3 Mon Sep 17 00:00:00 2001
From: Wayne Tung <Wayne_Tung@wiwynn.com>
Date: Thu, 4 Nov 2021 16:12:46 +0800
Subject: [PATCH 1/3] Set available when sensor fail

%% original patch: 0028-Set-available-when-sensor-fail.patch
---
 include/sensor.hpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/include/sensor.hpp b/include/sensor.hpp
index a8e340e..2e4b6c5 100644
--- a/include/sensor.hpp
+++ b/include/sensor.hpp
@@ -439,7 +439,6 @@ struct Sensor
         if (availableInterface)
         {
             availableInterface->set_property("Available", isAvailable);
-            errCount = 0;
         }
     }
 
@@ -450,6 +449,10 @@ struct Sensor
             markAvailable(false);
             return;
         }
+        else
+        {
+            markAvailable(true);
+        }
 
         if (errCount >= errorThreshold)
         {
-- 
2.32.0

